<!DOCTYPE html><html><head>
		<title>Arch Linux Bulletin Board System Post</title>
		<link rel="shortcut icon" href="https://upload.wikimedia.org/wikipedia/commons/b/ba/Crystal_Clear_app_tux.png" type="image/png">
		<link rel="stylesheet" href="main.css">


		<header>
			<div>
				<!-- 
					<a href="https://trevcan.github.io"> 
				-->
				<a href="">

					<!--
						<h1>trevcan@internets /random/path/idk $</h1>
					-->
					<h1>trevcan@internets /random/yourpath $</h1>
				</a>
				<div class="header-links">
					<a href="index.html"><h2 class="header-link">Index</h2></a>
					<a href="about.html"><h2 class="header-link">About</h2></a>
					<a href="rss.xml"><h2 class="header-link">RSS</h2></a>
					<a href="atom.xml"><h2 class="header-link">/atom</h2></a>
				</div>
			</div>
		</header>


	</head><body>

		<div class="container">
<!--<div class="container">-->

	<h1>Arch Linux Bulletin Board System Post</h1>

	<i>Last edited: 11/09/21 00:06:44 </i>

<p>
 
First of all, your help, any help would be greatly appreciated.
 
[h]
the problem
[/h]
I've been using the [https://passwordstore.org] program for quite a while now, about 9 months I'd say.
All was going well until about 4 weeks ago. I don't 
know what happened, what caused it or why. Pass started acting up, it took from
20 to 30 seconds what used to take literally 1 second. The pinentry-gtk-2 
program was taking a whole lot of time to start. So I dug deeper. Eventually I
found out that it definitely had something to do with GnuPG as decrypting
files directly through GnuPG also yielded the same results, after all, pass is
just a bash script that uses gpg encryption and decryption commands. So then I
went searching on the internets and it was pretty bad. I couldn't really find
any information regarding GnuPG besides [0]
</p>
<p>
I've tried almost* everything to get gpg up and running but it just, 
won't work! I don't know if this was a system upgrade or 
something but point is, it just slowed way down. When [b]requesting a password, [/b]
it'd take anywhere from 20 to 40 seconds to just show the pinentry binary (the 
one that asks you for the password), in particular, the <code>pinentry-gtk-2</code>, but 
guess what? I tried using the ncurses version also and it didn't work! I tried 
decrypting and encrypting files directly by using gpg, but yielded the same 
results!, also tried with the <code>pinentry-tty</code> binary.
</p>
<p>
I tried the stackexchange solution but it didn't work. Later on, 
I hopped onto libera IRC to join the <code>gnupg</code> channel, as 
suggested by members in the <code>pass</code> channel, as this is clearly much more 
specific to gpg. In the <code>gnupg</code> channel I had the fortune to be able to talk to 
someone to walk me through a ton of things. Testing, after testing and testing. 
We even tried creating less-resource intensive keys, creating temporary gnu 
directories to store keys in, et cetera.
</p>
<p>
[b]
Also, I should point out that the behaviour is not intermittent, [em] it is 
definitely constant. [/em]
I do have a password cache enabled, but every time time 
has passed or I manually clear the password cache (with [code] echo RELOADAGENT | gpg-connect-agent [/code] ) the same behaviour happens.
[/b]
</p>
<p>
[h]
System Information
[/h]
</p>
<p>
[em]Arch Linux. Hardware: T490. 16 GB RAM, 500 GB SSD. Intel core i7 8th gen.
[/em]
</p>
<p>
[code]
$ uname --all
Linux t490-4rch 5.14.9-zen2-1-zen #1 ZEN SMP PREEMPT Fri, 01 Oct 2021 19:03:23 +0000 x86_64 GNU/Linux
[/code]
</p>
<p>
[h]
logs
[/h]
</p>
<p>
[code]
strace pass show Test/random &gt; strace.pass.show.test.random.out 2&gt;&amp;1
[/code]
[url=https://gist.githubusercontent.com/TrevCan/27b969d478c69699f33df65d8cac4ff8/raw/c39cb3b3c713a5ebeddc18f3e7ef144601645733/gpgagent.debug.out] Log: gpg debug with strace [/url]
</p>
<p>
[quote=unixbhaskar]
Well, add these lines in your gpg-agent.conf file and tail the log file on another window see live what is going on :
	[code]
	log-file /path/to/your/gpg-agent.log
	debug-pinentry
	debug ipc
	verbose
	[/code]
[/quote]
</p>
<p>
[code]
$ cat ~/.gnupg/gpg-agent.conf
</p>
<h1> max-cache-ttl 39696</h1>

<h1> pinentry-program /usr/bin/pinentry-curses</h1>
<p>
pinentry-program /usr/bin/pinentry-tty
</p>
<p>
log-file /home/trevorlarbs/.gnupg/gpg-agent.debug.log
debug-pinentry
debug ipc
verbose
[/code]
</p>
<p>
[code]
$ tail -f .gnupg/gpg-agent.debug.log &gt; gpgagent.debug.out
[/code]
</p>
<p>
[url=https://gist.githubusercontent.com/TrevCan/27b969d478c69699f33df65d8cac4ff8/raw/c39cb3b3c713a5ebeddc18f3e7ef144601645733/gpgagent.debug.out] Log: gpgagent.debug.out [/url]
</p>
<p>
[h] What I've done so far
[/h]
[list]
[*]
	i've tried with normal linux kernel, linux-lts, and linux-zen. Same behaviour for all three.
[/*]
[*]
	live Booting of usb with iso: [b]behaviour does change, it asks for password instantly.[/b]
[/*]
[*]
	tried with other WM / DEs. dwm (larbs, default), KDE, xfce4. same behaviour in all.
[/*]
[*]
	tried creating a temporary directory with new gpg keys, even with less resource intensive algorithms. Did not work, still took a lot of time.
[/*]
</p>
<p>
[/list]
</p>
<p>
[b]references
[/b]
</p>
<p>
[list]
[*]
</p>
<p>
[url=https://unix.stackexchange.com/questions/628092/why-would-gpg-pinentry-be-slow-when-opening-in-gui-but-instantaneous-when-openin] 0. Why would GPG Pinentry be slow when opening in GUI but instantaneous when opening in CLI? [/url]
[/*]
[*]
[url=https://old.reddit.com/r/GPGpractice/comments/q26tsf/pinentry_slows_down_all_of_a_sudden/?ref=share&amp;ref_source=link] 1. pinentry slows down all of a sudden. r/GPGPractice. Posted by me. [/url]
[/*]
[*]
[url=https://trevcan.github.io/neofetch.html] 2. neofetch [/url]
[/*]
[*]
[url=https://old.reddit.com/r/GnuPG/comments/q2apuh/pinentry_takes_about_30_seconds_to_launch/] 3. pinentry takes about 30 seconds to launch. r/GnuPG. Posted by me. [/url]
[/*]
</p>
<p>
[/list]
</p>
<!--</div>-->
</div>
<footer>

	<span>
		<!--
			<b>By trevcan : Hector Canizales;</b>
		-->
		<b>By trevcan : Hector Canizales;</b>
	</span>
	<a href="LICENSE">
		<span>© sometime to ∞</span>
	</a>
	<p>
	<span>
		<b>Powered by my </b>
	</span>
	<a href="https://github.com/trevcan/blogit">
		<span>fork of blogit</span>
	</a>
	<span>
		and tocttou's beautiful
	</span>
	<a href="https://github.com/tocttou/hacker-blog/blob/master/_sass/base.scss">
		<span>css</span>
	</a>


</footer>

</body></html>
